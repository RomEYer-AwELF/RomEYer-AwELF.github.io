<footer id="colophon" class="site-footer" role="contentinfo">
    <div class="site-info">
        <div class="footertext">
            <div class="img-preload">
                <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/wordpress-rotating-ball-o.svg">
                <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/disqus-preloader.svg">
            </div>
            <% if(theme.hitokoto){ %>
                <p id="chakhsu"></p>
            <% } %>
            <p>本站总访问量：<a id="allcount"></a></p>
            <p style="color: #666666;"><%- theme.pagefooter %></p>
            <% if(theme.runtime){ %>
                <p id="momk" style="font-family: 'Ubuntu', sans-serif;color: #b9b9b9;"></p>
            <% } %>
        </div>
        <div class="footer-device">
            <p style="font-family: 'Ubuntu', sans-serif;">
               <span style="">Theme <a href="https://github.com/xbclub/Hexo-theme-sakura" target="_blank"
                         style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Sakura</a> <i
                class="iconfont icon-sakura rotating" style="color: #ffc0cb;display:inline-block"></i> by <a
                href="https://2heng.xin/" target="_blank"
                style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Mashiro</a>&<a
                href="https://www.hojun.cn/" target="_blank"
                style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Hojun</a>&<a
                href="https://42cloud.cn/" target="_blank"
                style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">42team</a>&<a
                href="https://www.loliloli.moe/" target="_blank"
                style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">RomEYer, Powered by Hexo</a>
               </span>
            </p>
            <p><a href="https://webify.cloudbase.net/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);"> CloudBase Webify 提供网站托管服务 </a></p>
        </div>
    </div>
</footer>
<script src="<%= theme.libs.js.title %>"></script>
<script src="<%- theme.libs.js.jquery %>"></script>
<script src="<%- theme.libs.js.lib %>"></script>
<script src="<%- theme.libs.js.clipboard %>"></script>
<script src="<%- theme.libs.js.InsightSearch %>"></script>
<script src="<%- theme.libs.js.fancybox %>"></script>
<script src="<%- theme.libs.js.zoom %>"></script>
<script src="<%- theme.libs.js.console %>"></script>
<script src="<%- theme.libs.js.smoove %>"></script>
<script src="<%- theme.libs.js.sakura %>"></script>
<script src="<%- theme.libs.js.Valine %>"></script>
<script src="<%- theme.libs.js.botui %>"></script>
<script src="<%- theme.libs.js.SmoothScroll %>"></script>
<script>
   $('[data-fancybox="images"]').fancybox({//可选
     thumbs : {
       autoStart : true //缩略图
     }
   });
   $('[data-fancybox]').fancybox({//启用函数，必须
     //protect: true //图片右键不能下载，可选
   });
</script>
<!-- 不蒜子 网页计数器 -->
<% if(theme.busuanzi.switch){ %>
    <script src="https://cdn.jsdelivr.net/gh/xbclub/staticCDN@0.8/js/busuanzi.pure.mini.js"></script>
<% } %>
      <% if(theme.readcounts){%>
       <script>
         fetch('https://counts.42cloud.cn/api/counts.html')
               .then(response => response.json())
               .then(data => {
                     if (document.getElementById("readcount")) {
                       document.getElementById("readcount").innerHTML=data.Count;
                   }
                   if (document.getElementById("allcount")){
                       document.getElementById("allcount").innerHTML=data.Allcount;
                   }
               })
               .catch(err => console.error(err))
       </script>
      <%}%>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script> -->
<script type="text/javascript">
    /* <![CDATA[ */
    if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
        var Poi = {
            "pjax": "<%- theme.pjax %>",
            "movies": {"url": "<%- theme.movies.url %>", "name": "<%- theme.movies.name %>", "live": "close"},
            "windowheight": "fixed",
            "codelamp": "close",
            "ajaxurl": "",
            "order": "asc",
            "formpostion": "bottom"
        };
    } else {
        var Poi = {
            "pjax": "<%- theme.pjax %>",
            "movies": {"url": "<%- theme.movies.url %>", "name": "<%- theme.movies.name %>", "live": "open"},
            "windowheight": "auto",
            "codelamp": "close",
            "ajaxurl": "",
            "order": "asc",
            "formpostion": "bottom"
        };
    }
    /* ]]> */

</script>
<script>
    $(document).ready(function () {
        if ($(".toc").length > 0 && document.body.clientWidth > 1200) {
            if ($(".pattern-center").length > 0) { //有图的情况
                tocbot.init({
                    // Where to render the table of contents.
                    tocSelector: '.toc', // 放置目录的容器
                    // Where to grab the headings to build the table of contents.
                    contentSelector: '.entry-content', // 正文内容所在
                    // Which headings to grab inside of the contentSelector element.
                    scrollSmooth: true,
                    headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
                    headingsOffset: -400,
                    scrollSmoothOffset: -85
                });
            } else {
                tocbot.init({
                    // Where to render the table of contents.
                    tocSelector: '.toc', // 放置目录的容器
                    // Where to grab the headings to build the table of contents.
                    contentSelector: '.entry-content', // 正文内容所在
                    // Which headings to grab inside of the contentSelector element.
                    scrollSmooth: true,
                    headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
                    headingsOffset: -85,
                    scrollSmoothOffset: -85
                });
            }
            var offsetTop = $('.toc').offset().top - 95;
            window.onscroll = function () {
                var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
                if (scrollTop >= offsetTop) {
                    $('.toc').addClass('toc-fixed');
                } else {
                    $('.toc').removeClass('toc-fixed');
                }
            }
        }
    });
</script>
<% if(theme.runtime){ %>
    <script type="text/javascript">
        function NewDate(str) {
            str = str.split('-');
            var date = new Date();
            date.setUTCFullYear(str[0], str[1] - 1, str[2]);
            date.setUTCHours(0, 0, 0, 0);
            return date;
        }

        function momxc() {
            var birthDay = NewDate("<%= theme.siteBuildingTime %>");
            var today = new Date();
            var timeold = today.getTime() - birthDay.getTime();
            var sectimeold = timeold / 1000
            var secondsold = Math.floor(sectimeold);
            var msPerDay = 24 * 60 * 60 * 1000;
            var e_daysold = timeold / msPerDay;
            var daysold = Math.floor(e_daysold);
            var e_hrsold = (daysold - e_daysold) * -24;
            var hrsold = Math.floor(e_hrsold);
            var e_minsold = (hrsold - e_hrsold) * -60;
            var minsold = Math.floor((hrsold - e_hrsold) * -60);
            var seconds = Math.floor((minsold - e_minsold) * -60).toString();
            document.getElementById("momk").innerHTML = "本站已在各种灾难中运行了" + daysold + "天" + hrsold + "小时" + minsold + "分" + seconds + "秒";
            setTimeout(momxc, 1000);
        }

        momxc();
    </script>
<% } %>

<!--一言-->
<% if(theme.hitokoto){ %>
    <script type="text/javascript">
        fetch('https://v1.hitokoto.cn')
            .then(response => response.json())
            .then(data => {
                chakhsu(document.getElementById("chakhsu"), data.hitokoto);
            })
            .catch(err => console.error(err));


        // 文字循环处理 两个参数，第一个是需要显示在哪个标签内append 以id为选择器，第二个参数是 要处理的文字
        function chakhsu(r, text) {
            function t() {
                return b[Math.floor(Math.random() * b.length)];
            }

            function e() {
                return String.fromCharCode(94 * Math.random() + 33);
            }

            function n(r) {
                for (var n = document.createDocumentFragment(), i = 0; r > i; i++) {
                    var l = document.createElement("span");
                    (l.textContent = e()), (l.style.color = t()), n.appendChild(l);
                }
                return n;
            }

            function i() {
                var t = o[c.skillI];
                c.step
                    ? c.step--
                    : ((c.step = g),
                        c.prefixP < l.length
                            ? (c.prefixP >= 0 && (c.text += l[c.prefixP]), c.prefixP++)
                            : "forward" === c.direction
                            ? c.skillP < t.length
                                ? ((c.text += t[c.skillP]), c.skillP++)
                                : c.delay
                                    ? c.delay--
                                    : ((c.direction = "backward"), (c.delay = a))
                            : c.skillP > 0
                                ? ((c.text = c.text.slice(0, -1)), c.skillP--)
                                : ((c.skillI = (c.skillI + 1) % o.length),
                                    (c.direction = "forward"))),
                    (r.textContent = c.text),
                    r.appendChild(
                        n(
                            c.prefixP < l.length
                                ? Math.min(s, s + c.prefixP)
                                : Math.min(s, t.length - c.skillP)
                        )
                    ),
                    setTimeout(i, d);
            }

            /*以下内容自定义修改*/
            var l = "",
                o = [text].map(function (r) {
                    return r + "";
                }),
                a = 3,
                g = 1,
                s = 5,
                d = 75,
                b = [
                    "rgb(110,64,170)",
                    "rgb(150,61,179)",
                    "rgb(191,60,175)",
                    "rgb(228,65,157)",
                    "rgb(254,75,131)",
                    "rgb(255,94,99)",
                    "rgb(255,120,71)",
                    "rgb(251,150,51)",
                    "rgb(226,183,47)",
                    "rgb(198,214,60)",
                    "rgb(175,240,91)",
                    "rgb(127,246,88)",
                    "rgb(82,246,103)",
                    "rgb(48,239,130)",
                    "rgb(29,223,163)",
                    "rgb(26,199,194)",
                    "rgb(35,171,216)",
                    "rgb(54,140,225)",
                    "rgb(76,110,219)",
                    "rgb(96,84,200)"
                ],
                c = {
                    text: "",
                    prefixP: -s,
                    skillI: 0,
                    skillP: 0,
                    direction: "forward",
                    delay: a,
                    step: g
                };
            i();
        }
    </script>
<% } %>    

    <style type="text/css">
         .live2d-widget-container {
            z-index: 6 !important;
         }
    </style>
    
<!-- pages壁纸切换 -->
<% if(theme.skins){ %>
<div style="font-size: .1em;">
    <div class="skin-menu no-select" id="mainskin"  style="position: fixed">
        <div class="theme-controls row-container">
            <ul class="menu-list">
                <li id="white-bg"> <i class="fa fa-television" aria-hidden="true"></i></li>
                <li id="sakura-bg"> <i class="iconfont icon-sakura"></i></li>
                <li id="gribs-bg"> <i class="fa fa-slack" aria-hidden="true"></i></li>
                <li id="KAdots-bg"> <i class="iconfont icon-dots"></i></li>
                <li id="totem-bg"> <i class="fa fa-optin-monster" aria-hidden="true"></i></li>
                <li id="pixiv-bg"> <i class="iconfont icon-pixiv"></i></li>
                <li id="bing-bg"> <i class="iconfont icon-bing"></i></li>
                <li id="dark-bg"> <i class="fa fa-moon-o" aria-hidden="true"></i></li>
            </ul>
        </div>
        <div class="font-family-controls row-container">
            <button type="button" class="control-btn-serif selected" data-mode="serif" onclick="mashiro_global.font_control.change_font()">Serif</button>
            <button type="button" class="control-btn-sans-serif" data-mode="sans-serif" onclick="mashiro_global.font_control.change_font()">Sans Serif</button>
        </div>
    </div>   
    <canvas id="night-mode-cover"></canvas> 
        <div class="changeSkin-gear no-select">
        <div class="keys" id="setbtn"> <span id="open-skinMenu"> 切换壁纸 | SCHEME TOOL 
            &nbsp;<i class="iconfont icon-gear inline-block rotating"></i> </span></div>
    </div>
</div>
<!-- skin.end -->
<% } %>
<% if(theme.cnzz.enable){ %>
    <div style="font-size: .1em;text-align: center;margin-top: -3%;font-family: 'loli'">
    <script type="text/javascript">document.write(unescape("%3Cspan id='<%- theme.cnzz.id %>'%3E%3C/span%3E%3Cscript src='https://s9.cnzz.com/z_stat.php%3Fid%3D1278953952%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));
    </script>
    </div>
<% } %>
